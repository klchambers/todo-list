![To Do List app ASCII art](documentation/toDoListASCIIArt.png)

**Table of contents:**

- [Introduction](#introduction)
- [Deployed Site](#deployed-site)
- [User Experience](#user-experience)
  - [Workflow Logic Charts](#workflow-logic-charts)
  - [User Goals](#user-goals)
  - [User Stories](#user-stories)
  - [Site Owner's Goals](#site-owners-goals)
- [Features](#features)
  - [Main Menu](#main-menu)
  - [Creating a Task](#creating-a-task)
  - [Marking Tasks as Done](#marking-tasks-as-done)
  - [Deleting a Task](#deleting_a_task)
  - [Completed Tasks List](#completed-tasks-list)
  - [Exporting Data](#exporting-data)
  - [Data Model](#data-model)
  - [Further Development and Future Features](#further-development-and-future-features)
- [Testing and Validation](#testing-and-validation)
  - [Manual Testing Methodology](#manual-testing-methodology)
  - [Pep-8 Code Analysis](#pep-8-code-analysis)
  - [Bugs and Challenges](#bugs-and-challenges)
  - [Development](#development)
  - [Contributing](#contributing)
  - [Deployment](#deployment)
- [Technologies Used](#technologies-used)
- [Acknowledgements](#acknowledgements)

<a id=introduction></a>

## Introduction

To Do List is a CLI application written in Python that allows a user to record and store their To Do tasks, mark tasks as complete, and see when they created or completed tasks.

![Mockup of Application in Heroku mock terminal across different device screens](documentation/amIResponsiveMockup.png)

<a id=deployed-site></a>

## Deployed Site

The program has been deployed to Heroku and can be accessed [here](https://pp3todoapp-ab2e466bceb0.herokuapp.com/).

<a id=user-experience></a>

## User Experience

<a id="workflow-logic-charts"></a>

### Workflow Logic Charts

![Application flow diagram](/documentation/finalPP3Flowchart.png)

<details><summary>Draft Application Logic flowchart</summary>
<img src="documentation/draftPP3Flowchart.png">

A number of changes were made to the original logic shown in the above flowchart, created during the project's inception.

These deviations from the original flow chart were made to simplify the code and improve the user experience, limiting their options to the most useful and necessary.

#### Create new list

Due to constraints relating to the use of Google Sheets as a method of persistent storage, it was decided that the application will access a single spreadsheet, consisting of two worksheets, 'Tasks' and 'Done'.

As a result of this decision, the user is presented with both their Tasks list and the main menu when running the app, and the 'View list' option was consolidated into the main options menu.

#### Exiting the application

In the original spec, the user would only be able to exit the application from the 'View list' option.

In the current version, the user is given the option to quit the app from the main menu, as well as the completed tasks section.

This ensures that the user has multiple points at which they can exit the app. A particularly simple example of this logic allows the user to run the app, view their tasks to complete, and quit the app with as little friction as possible.

#### Data export function

The functionality to export data from the app in csv format has been added since the inception of this project. From the main menu, the user has the option to export their data in csv format by selecting option 5. In doing so, the application will write this data to a csv file and attempt to save this file to the users 'Downloads' folder. If this is not possible (i.e. the user is running the app via the Heroku deployment, or has moved their Downloads folder to an unexpected filepath), the application will make an exception to the exporting process and create a new worksheet in the Google Sheets document containing an archive of the user's data at the time of export. A view-only URL to this data is shared with the user in the terminal.

If the user is running the app locally with the downloads folder in it's expected location, the file will automatically be created and saved with a unique file name (generated by the datetime module to ensure that the filename is identifiable and unique, using granular information related to the time that the file was created). This method ensures that more than one file can be exported on the same day without conflicting file names, thus minimising user interaction, minimising the possibility for error or inconvenience, and enhancing the user's experience.

</details>

<a id=user-goals></a>

### User Goals

- I would like to store To Do list data, check off tasks when I complete them, and view and delete a list of completed tasks
- I would like the app to record the date that I create and complete tasks, for later reference
- I would like the app to display my To Do list in a user-friendly, readable format
- I would like the data to be persistent, saving to a database so I can view it later, even after closing the program

<a id=user-stories></a>

### User Stories

- The app should be intuitive, and display actionable and informative data
- The app should be responsive to my input, and inform me if I make any mistakes or input any invalid data
- The app should store my data, and use persistent storage to allow me to view it at a later date after closing the app
- The app should clear the terminal display appropriately after certain actions, such as when I delete data, clear a list, or exit the program

<a id=site-owners-goals></a>

### Site Owner's Goals

- I aim to create a useful program through which data can be stored with relevant contextual information, such as dates and priorities/importance
- I aim to create a program which a user can quit, and come back to at a later date
- I aim to implement defensive design in the program so that exceptions and errors are caught and handled well, with as little inconvenience to the user as possible

<a id=features></a>

## Features

<a id=main-menu></a>

### Main menu

Upon running the application, the user is presented with their To Do list and the main menu. If the To Do list is empty, a message telling the user that they have no tasks to complete is displayed.

The menu consists of five options. Four of these are accessible by entering a number from 1 - 4, while the fifth (exiting the application) is triggered by entering the word `exit`. This prompt was chosen in favour over a numerical command in order to prevent accidental exits, to improve the user experience.

![Main menu screenshot](documentation/screencaps/app_loadScreencap.png)

<a id=creating-a-task></a>

### Creating a Task

From the main menu, entering `1` calls the create_task function, and the user is asked to enter their new task.

There are a handful of keywords (stored in the important_keywords) variable that the user is forbidden from entering as a task name:

`important_keywords = ['quit', 'menu', 'clear', 'yes', 'no']`

These keywords have been reserved for prompts that are used elsewhere in the application. It is important that these words are not used as Task names as the creation of such tasks results in list items that cannot be marked as completed or removed from the To Do list.

Once a new task is created, the updated To Do list is printed to the terminal along with the main menu options.

![Creating a task screenshot](documentation/screencaps/create_taskCompletedScreencap.png)

<a id=marking-tasks-as-done></a>

### Marking Tasks as Done

To mark a task as Done, the user is asked to enter the index number of their completed task or the task name.

If they enter an invalid index or task name, they are informed that their entered task cannot be found, and are prompted to try again.

![Completed task screenshot](documentation/screencaps/task_doneScreencap.png)

Once a valid index number or task name has been received, the task is removed from the To Do list and moved to the list of completed tasks, with a record of the date that the task was marked as complete.

![Completed task screenshot 2](documentation/screencaps/task_doneIndexInProgress.png)

![Completed task Screenshot 3](documentation/screencaps/task_doneNameInProgress.png)

<a id=deleting_a_task></a>

### Deleting a Task

It is also possible to delete a task by entering `3` from the main menu. This option differs from marking a task as complete as it removes the task and all data related to it, in contrast to marking a task as done which preserves the title and moves it to the completed task list.

The user is prompted to enter a task's index number or its title.

![Deleting a task screenshot](documentation/screencaps/delete_taskOneScreencap.png)

A confirmation prompt is then displayed, asking the user to confirm by entering `YES` or `NO`. This prompt is case-sensitive to prevent the accidental deletion of unrecoverable data.

Once deleted, app_load() is called and the updated Task list is displayed along with the main menu.

<a id=completed-tasks-list></a>

### Completed Tasks List

By entering `4` from the options menu, the user can view a log of their completed tasks along with the dates that they marked these tasks as complete.

Three options are presented: `menu`, which takes the user back to the options menu, `clear`, to delete all data from this list, and `quit`, which calls the built-in Python `exit()` function and quits the app.

![Completed tasks list screenshot](documentation/screencaps/task_doneIndexInProgress.png)

![Completed tasks list screenshot](documentation/screencaps/task_doneNameInProgress.png)

When `clear` is chosen, the user is asked to confirm their choice. This Yes/No option is case-sensitive to defend against the possibility of accidental deletion of unrecoverable data.

![Clear completed tasks list screenshot](documentation/screencaps/clearDoneTasks.png)

Once cleared, all data is removed from the 'Done' worksheet and the user is taken back to the main menu.

<a id=exporting-data></a>

### Exporting Data

By selecting 5 from the options menu, the user can export their data in CSV format.

The export_data function uses try/except blocks to determine the method used to deliver this data to the user

#### Automatic download of csv file

The initial try block creates a file using the datetime.now() method (used to create a unique file name, allowing multiple files to be exported on the same day). This file is written using the csv.writer() method to write the csv file, and os.path to save it to the user's downloads folder.

![Screenshot of csv file in downloads folder](documentation/screencaps/export_dataScreencap.png)

![Screenshot of csv file contents](documentation/screencaps/exportedDataFileScreencap.png)

#### Create data archive and share URL

If the user exports their data but a path to their downloads folder cannot be found (i.e. it has been moved from the expected location or renamed, or the user is running the app via the Heroku deployment), an except block runs.

When this except block runs due to error or exception, an error message is printed to the user explaining that a csv file cannot be saved to the downloads folder, and that their data has been saved to a new worksheet.

A URL that links to the spreadsheet (view-only) is printed in the terminal for the user to follow.

![Screenshot of csv data in Heroku deployment](documentation/screencaps/exportingDataHerokuScreencap.png)

<a id=data-model></a>

### Data Model

Data is stored in a Google Sheet. The user can export data to other sheets to be saved and archived and access this via a URL with view-only permissions. These permissions are in place in order to prevent the user from making alterations to the sheet, its API permissions, etc, which could break essential functionality of the application.

#### Tasks Worksheet

The core of the application revolves around managing tasks. These tasks are stored in a worksheet named "Tasks" within a Google Sheets document. Each task is represented as a row in the worksheet, with the following structure:

1. **Task Name**: The description of the task entered by the user.
2. **Date Created**: The date when the task was created. This field is automatically populated with the current date when a new task is added.

#### Done Worksheet

Tasks that have been completed are moved from the "Tasks" worksheet to the "Done" worksheet. This allows users to track their completed tasks separately. The "Done" worksheet has the same structure as the "Tasks" worksheet:

1. **Task Name**: The description of the completed task.
2. **Date Completed**: The date when the task was marked as completed. Similar to the "Date Created" field, this is automatically populated when a task is moved to the "Done" list.

<a id=further-development-and-future-features></a>

### Further Development and Future Features

Ideas for further development and future features which could further ehance the user experience and functionality of this application include:


- **Task Priority:** Allow users to set task priorities and sort tasks based on priority levels. Print high priority tasks in red, medium in yellow, and low in green to provide visual indication to user.
- **Due Dates:** Enable users to set due dates for tasks and receive reminders or notifications for upcoming deadlines.
- **Task Categories:** Implement task categorization to help users organize their tasks efficiently.

<a id=testing-and-validation></a>

## Testing and Validation

<a id=manual-testing-methodology></a>

### Manual Testing Methodology

| Test ID | Action                          | Expected Results                                       |
|---------|---------------------------------|--------------------------------------------------------|
| 1       | Open the application            | The main menu is displayed                             |
| 2       | Create a new task               | Task creation form appears                             |
| 3       | Enter a task name               | Task name field accepts input                          |
| 4       | Enter an invalid task name (e.g. consisting of only a number, or an important keyword such as 'clear' or 'no') | Error message is displayed |
| 5       | Enter a task name and submit    | Task is added to the task list                         |
| 6       | View tasks in the task list     | All tasks are displayed in the task list               |
| 7       | Enter text into task_done function that does not match any existing tasks | Error message displayed stating 'No task found matching {x}... Please try again.' before asking for input again |
| 8       | Mark a task as done             | Task is moved to the completed tasks list              |
| 9       | Export data to csv              | Data is saved in csv format to the downloads folder    |
| 10       | Export data using Heroku deployment | FileNotFoundError occurs, new worksheet is created and URL shared with user |
| 11      | Delete a task                   | Task is removed from the task list                     |
| 12      | Enter text into delete_task function that does not match any existing tasks | Error message displayed stating 'No task found matching {x}... Please try again.' before asking for input again |
| 13      | View completed tasks list       | Completed tasks list is cleared                        |
| 14      | Clear the completed tasks list  | Confirmation prompt is displayed                       |
| 15      | Cancel clear of completed tasks | List clear procedure cancelled and returns to main menu|
| 16      | Confirm clear of completed tasks| Completed tasks list is now empty                      |
| 17      | Exit app                        | Terminal clears and program exits                      |


<a id=pep8-code-analysis></a>

### Pep-8 Code Analysis

Code has been passed through the [Code Institute Pep8 Linter](https://pep8ci.herokuapp.com/) and returns with no issues.

<details><summary>Pep8 Linter Results</summary>
<img src="documentation/pep8LinterResults.png"> 
</details>

<a id=bugs-and-challenges></a>

### Bugs and Challenges

The program has been thoroughly tested for issues and there are no known bugs or issues with the program in its current iteration.

During development of this project the following issues were identified and amended:

#### 1. Identical Filenames Issue
Not calling `datetime.now()` while generating filenames resulted in identical filenames being created, leading to the overwrite of existing files. This issue occurred due to the lack of a unique timestamp in the filename generation process.

#### 2. Handling Empty Task Lists
An update to the gspread API caused an issue where an empty task list was not recognized correctly. This occurred because an empty list (`[]`) was mistakenly recognized as a task. To resolve this, adjustments were made to check for `[[]]` instead of `[]` to accurately identify an empty task list, and a known compatible version of gspread has been specified in requirements.txt.

#### 3. Incorrect Index Targeting
Due to the addition of a header row in the worksheet, targeting the wrong index led to inaccuracies in data manipulation. This caused discrepancies in accessing and modifying data within the application, resulting in incorrect operations being performed on task items. Adjustments were made to correct the index targeting and ensure accurate data manipulation.

#### 4. Date Formatting Issue

Unique characters in the date format provided by datetime caused an issue when creating worksheet names. The gspread API threw an exception when creating new worksheets when the export_data function was called. This issue likely arose from incompatible characters or formatting styles, resulting in errors or unexpected behavior. Reformatting the date format resolved this issue, ensuring compatibility and consistency in worksheet naming conventions.

<a id=development-and-deployment></a>

## Development and Deployment



<a id=development></a>

### Development



<a id=contributing></a>

### Contributing



<a id=deployment></a>

### Deployment



<a id=technologies-used></a>

## Technologies Used

- [Lucidchart](https://www.lucidchart.com/pages/): Diagrams/flowcharts for application logic
- [Visual Studio Code](https://code.visualstudio.com/): Code editing
- [GitHub](https://github.com/): Source control
- [Heroku](https://www.heroku.com): Live deployment of the app
- [Code Institute PEP8 Linter](https://pep8ci.herokuapp.com/): Python code analysis tool
- [datetime Python module](https://docs.python.org/3/library/datetime.html): used to input date data into the spreadsheet
- [Google Sheets](https://www.google.com/sheets/about/): Cloud-based spreadsheet editor used to store data
- [gspread API](https://docs.gspread.org/en/latest/): Python API for Google Sheets, used to access spreadsheets, provide access to run.py, and read, write and format cells
- [Google Drive API](https://developers.google.com/drive/api/guides/about-sdk): REST API, credentials, and authorisation

<a id=acknowledgements></a>

## Acknowledgements

Using os.path.expanduser('~/Downloads') to download csv file to users download folder adapted from code posted to Stack Overflow by users [theDude](https://stackoverflow.com/users/12737389/thedude) and [nagyl](https://stackoverflow.com/users/11080283/nagyl) in [this thread](https://stackoverflow.com/questions/60475285/accessing-users-download-folder-in-python). 

Code used to write rows to csv using the built-in Python csv module adapted from code posted in [this](https://ioflood.com/blog/python-write-to-csv/) blog post by Gabriel Ramuglia, posted to the [ioflood.com blog](https://ioflood.com/blog) on 13 September, 2023.

The if/else statement used in clear_terminal to determine os.clear method based on operating system was posted by the user [poke](https://stackoverflow.com/users/216074/poke) in [this](https://stackoverflow.com/questions/2084508/clear-the-terminal-in-python) Stack Overflow thread.

Date formatting using `strftime()` method adapted from an example posted by [NPE](https://stackoverflow.com/users/367273/npe) in [this](https://stackoverflow.com/questions/6288892/python-how-to-convert-datetime-format) Stack Overflow thread.

ANSI character methods to print bold text in the terminal adapted from examples posted by [Peter Mortensen](https://stackoverflow.com/users/63550/peter-mortensen) and [Bacara](https://stackoverflow.com/users/1770999/bacara) in [this](https://stackoverflow.com/questions/8924173/how-can-i-print-bold-text-in-python#:~:text=In%20Python%2C%20escape%20sequences%20are,want%20to%20represent%20in%20bold.) Stack Overflow thread.

[This](https://patorjk.com/software/taag) text to ASCII art generator by Patrick Gillespie on [patrorjk.com](https://patorjk.com/) was used to generate the ASCII art displayed on app load.

Course content from Code Institute's Diploma in Full Stack Software Development has been useful in teaching programming concepts and Python methods.

Guidance from Code Institute mentor Brian O'Hare has been invaluable throughout the stages of this project's inception and development.
